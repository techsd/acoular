<!DOCTYPE html>

<html lang="en" data-content_root="../../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>SamplesBuffer &#8212; Acoular 24.10 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=f63d8bfa" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/haikuac.css?v=41595bc8" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx_gallery.css?v=f3715e10" />
    <script src="../../../../_static/documentation_options.js?v=62826975"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../../../_static/acoular_logo.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="tprocess" href="../../acoular.tprocess.html" />
    <link rel="prev" title="utils" href="../acoular.tools.utils.html" /> 
  </head><body>
      <div class="header"><img class="rightlogo" src="../../../../_static/Acoular_logo.png" alt="Logo"/><h1 class="heading"><a href="../../../../index.html">
          <span>Acoular 24.10 documentation</span></a></h1>
        <h2 class="heading"><span>SamplesBuffer</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="../acoular.tools.utils.html">utils</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../acoular.tools.utils.html">utils</a>
        &#160;&#160;::&#160;&#160;
        <a href="../../acoular.tprocess.html">tprocess</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <section id="samplesbuffer">
<h1>SamplesBuffer<a class="headerlink" href="#samplesbuffer" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">acoular.tools.utils.</span></span><span class="sig-name descname"><span class="pre">SamplesBuffer</span></span><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../acoular.base.InOut.html#acoular.base.InOut" title="acoular.base.InOut"><code class="xref py py-class docutils literal notranslate"><span class="pre">InOut</span></code></a></p>
<p>Handles buffering of samples from a source.</p>
<p>This class is used to buffer samples from a source and provide them in blocks
of a specified size. There are several usecases for this class, as demonstrated in
the following.</p>
<p class="rubric">Examples</p>
<p>Let us assume we want to draw blocks of 16 samples from our source, but we want to make sure
that we always have twice the number of samples in the buffer. We can achieve this simple behaviour
by using the following code:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">acoular</span> <span class="k">as</span> <span class="nn">ac</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a white noise source with 512 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">TimeSamples</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">data</span><span class="o">=</span><span class="n">ac</span><span class="o">.</span><span class="n">WNoiseGenerator</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">sample_freq</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">numsamples</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">)</span><span class="o">.</span><span class="n">signal</span><span class="p">()[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span>
<span class="gp">... </span>    <span class="n">sample_freq</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a buffer with a size of 32 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">SamplesBuffer</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># get the first block of 16 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_equal</span><span class="p">(</span><span class="n">block</span><span class="p">,</span> <span class="n">source</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">16</span><span class="p">])</span>
</pre></div>
</div>
<p>Here, on the first call to the result method, the buffer will fill up by collecting blocks with same size
from the source. The buffer will then return the first block of 16 samples. On the next call to the result
method, the buffer will be filled again and returns the next block of 16 samples.</p>
<p>In some cases, we might want to draw a different number of samples from the source than we want to return.
This can be achieved by setting the <cite>source_num</cite> trait of the buffer. A special case is the return of a variable
number of samples. This is the case, for example, in the class <a class="reference internal" href="../acoular.tbeamform.BeamformerTimeTraj.html#acoular.tbeamform.BeamformerTimeTraj" title="acoular.tbeamform.BeamformerTimeTraj"><code class="xref py py-class docutils literal notranslate"><span class="pre">BeamformerTimeTraj</span></code></a>,
in which a different number of time samples is required from the buffer for further delay-and-sum processing
depending on the expected delay, which can be vary for moving sources. At the same time, however, only ‘num’
samples should be written to and removed from the buffer. This behavior can be achieved by setting the
<cite>shift_index_by</cite> trait to ‘num’ and by setting the <cite>result_num</cite> trait to the number of samples that should be
returned by the result function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">buffer</span> <span class="o">=</span> <span class="n">ac</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">SamplesBuffer</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">result_num</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">shift_index_by</span><span class="o">=</span><span class="s1">&#39;num&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block_sizes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">next</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>  <span class="c1"># this time, the buffer will return 20 samples, but the buffer will only forget the first 16 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer</span><span class="o">.</span><span class="n">result_num</span> <span class="o">=</span> <span class="mi">24</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<span class="gp">... </span>    <span class="nb">next</span><span class="p">(</span><span class="n">buffer</span><span class="o">.</span><span class="n">result</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="mi">16</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>  <span class="c1"># this time, the buffer will return 24 samples, but the buffer will only forget the first 16 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_array_equal</span><span class="p">(</span><span class="n">block_sizes</span><span class="p">,</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.length">
<span class="sig-name descname"><span class="pre">length</span></span><em class="property"><span class="w"> </span><span class="pre">=</span> <span class="pre">Int(desc='number</span> <span class="pre">of</span> <span class="pre">samples</span> <span class="pre">that</span> <span class="pre">fit</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">buffer')</span></em><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.length" title="Link to this definition">¶</a></dt>
<dd><p>number of samples that fit in the buffer</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.source_num">
<span class="sig-name descname"><span class="pre">source_num</span></span><em class="property"><span class="w"> </span><span class="pre">=</span> <span class="pre">Union(</span> <span class="pre">…</span></em><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.source_num" title="Link to this definition">¶</a></dt>
<dd><p>number of samples per block to obtain from the source. If ‘None’, use ‘num’ argument of result method</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.result_num">
<span class="sig-name descname"><span class="pre">result_num</span></span><em class="property"><span class="w"> </span><span class="pre">=</span> <span class="pre">Union(</span> <span class="pre">…</span></em><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.result_num" title="Link to this definition">¶</a></dt>
<dd><p>number of samples to return from the buffer. If ‘None’, use ‘num’ argument of result method</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.shift_index_by">
<span class="sig-name descname"><span class="pre">shift_index_by</span></span><em class="property"><span class="w"> </span><span class="pre">=</span> <span class="pre">Enum(</span> <span class="pre">…</span></em><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.shift_index_by" title="Link to this definition">¶</a></dt>
<dd><p>index shift value for the buffer. If “result_num”, buffer will return and forget ‘result_num’ samples.
If “num”, buffer will return ‘result_num’ samples but will forget ‘num’ samples</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.level">
<span class="sig-name descname"><span class="pre">level</span></span><em class="property"><span class="w"> </span><span class="pre">=</span> <span class="pre">Property(desc='current</span> <span class="pre">filling</span> <span class="pre">level</span> <span class="pre">of</span> <span class="pre">buffer')</span></em><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.level" title="Link to this definition">¶</a></dt>
<dd><p>current filling level of buffer</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.dtype">
<span class="sig-name descname"><span class="pre">dtype</span></span><em class="property"><span class="w"> </span><span class="pre">=</span> <span class="pre">Any(desc='data</span> <span class="pre">type</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">buffer')</span></em><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.dtype" title="Link to this definition">¶</a></dt>
<dd><p>data type of the buffer elements</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.increase_buffer">
<span class="sig-name descname"><span class="pre">increase_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.increase_buffer" title="Link to this definition">¶</a></dt>
<dd><p>Increase the buffer by ‘num’ samples.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.read_from_buffer">
<span class="sig-name descname"><span class="pre">read_from_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.read_from_buffer" title="Link to this definition">¶</a></dt>
<dd><p>Read samples from the buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>num</strong><span class="classifier">int</span></dt><dd><p>number of samples to read from the buffer.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>numpy.ndarray</dt><dd><p>block of samples from the buffer</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.fill_buffer">
<span class="sig-name descname"><span class="pre">fill_buffer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.fill_buffer" title="Link to this definition">¶</a></dt>
<dd><p>Fill the buffer with samples from the source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>snum</strong><span class="classifier">int</span></dt><dd><p>number of samples to return from the source.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="acoular.tools.utils.SamplesBuffer.result">
<span class="sig-name descname"><span class="pre">result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#acoular.tools.utils.SamplesBuffer.result" title="Link to this definition">¶</a></dt>
<dd><p>Return blocks of samples from the buffer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>num</strong><span class="classifier">int</span></dt><dd><p>number of samples to return.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>numpy.ndarray</dt><dd><p>block of samples from the buffer</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="../acoular.tools.utils.html">utils</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../acoular.tools.utils.html">utils</a>
        &#160;&#160;::&#160;&#160;
        <a href="../../acoular.tprocess.html">tprocess</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2024, Acoular Development Team.
      Last updated on Oct 23, 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>